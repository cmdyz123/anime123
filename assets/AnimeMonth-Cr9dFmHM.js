import{r as l,p as $,c as D,o as I,a as n,d as t,t as c,w as J,m as O,F as _,e as p,u as V,g as i,b as x}from"./vendor-BQIWbYX8.js";import{_ as B}from"./index-DgOVOUzi.js";const E={class:"anime-list"},L={class:"header-section"},T={class:"category-filter"},w=["value"],F={class:"anime-grid"},R=["onClick"],q=["src","alt"],P={class:"anime-title"},U={class:"anime-info"},W={key:0,class:"anime-category"},j={__name:"AnimeMonth",setup(z){const u=V(),h=$(),o=l(h.params.month||"2025.10"),f=l(o.value.replace(".","年")+"月"),y=a=>{u.push({name:"AnimeDetails",params:{id:a.id},query:{anime:JSON.stringify(a)}})},C=()=>{u.push({name:"CategoryManager",params:{month:o.value}})},A=()=>{u.push({name:"MonthEditor",params:{month:o.value}})},d=l(JSON.parse(localStorage.getItem(`animeCategories${o.value}`))||[{name:"原创动画"},{name:"动画官网"},{name:"PV"},{name:"先行画面"}]),r=l(""),m=l([]),k=D(()=>r.value?m.value.filter(a=>a.category===r.value):m.value),M=()=>{console.log(`筛选分类: ${r.value}`)},S=()=>{const a=JSON.parse(localStorage.getItem(`animeCategories${o.value}`));a&&(d.value=a);const s=JSON.parse(localStorage.getItem(`animeList${o.value}`))||[],e=v=>v.map(g=>{const b=s.find(N=>N.id===g.id);return{...g,category:b?.category||""}});m.value=e(s)};return I(()=>{S()}),(a,s)=>(i(),n("div",E,[t("div",L,[t("h1",null,c(f.value)+" 新番",1),t("div",{class:"nav-buttons"},[t("button",{class:"nav-btn",onClick:C},"设置分类"),t("button",{class:"nav-btn",onClick:A},"动漫编辑")])]),t("div",T,[J(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>r.value=e),onChange:M},[s[1]||(s[1]=t("option",{value:""},"所有分类",-1)),(i(!0),n(_,null,p(d.value,e=>(i(),n("option",{key:e.name,value:e.name},c(e.name),9,w))),128))],544),[[O,r.value]])]),t("div",F,[(i(!0),n(_,null,p(k.value,e=>(i(),n("div",{key:e.id,class:"anime-card",onClick:v=>y(e)},[t("img",{src:e.image,alt:e.title,class:"anime-image"},null,8,q),t("div",P,c(e.title),1),t("div",U,c(e.info),1),e.category?(i(),n("div",W,c(e.category),1)):x("",!0)],8,R))),128))])]))}},K=B(j,[["__scopeId","data-v-66afb9ad"]]);export{K as default};
