import{r as l,p as I,c as $,o as D,a as n,d as t,t as c,w as J,m as O,F as _,e as p,u as V,g as i,b as x}from"./vendor-B6wqEA49.js";import{_ as B,g as E}from"./index-CLZbKOHU.js";const L={class:"anime-list"},T={class:"header-section"},w={class:"category-filter"},F=["value"],P={class:"anime-grid"},R=["onClick"],q=["src","alt"],U={class:"anime-title"},W={class:"anime-info"},j={key:0,class:"anime-category"},z={__name:"AnimeMonth",setup(G){const u=V(),h=I(),o=l(h.params.month||"2025.10"),f=l(o.value.replace(".","年")+"月"),C=a=>{u.push({name:"AnimeDetails",params:{id:a.id},query:{anime:JSON.stringify(a)}})},y=()=>{u.push({name:"CategoryManager",params:{month:o.value}})},A=()=>{u.push({name:"MonthEditor",params:{month:o.value}})},g=l(JSON.parse(localStorage.getItem(`animeCategories${o.value}`))||[{name:"原创动画"},{name:"动画官网"},{name:"PV"},{name:"先行画面"}]),r=l(""),m=l([]),k=$(()=>r.value?m.value.filter(a=>a.category===r.value):m.value),M=()=>{console.log(`筛选分类: ${r.value}`)},S=()=>{const a=JSON.parse(localStorage.getItem(`animeCategories${o.value}`));a&&(g.value=a);const s=JSON.parse(localStorage.getItem(`animeList${o.value}`))||[],e=v=>v.map(d=>{const N=s.find(b=>b.id===d.id);return{...d,category:N?.category||"",image:E(d.image)}});m.value=e(s)};return D(()=>{S()}),(a,s)=>(i(),n("div",L,[t("div",T,[t("h1",null,c(f.value)+" 新番",1),t("div",{class:"nav-buttons"},[t("button",{class:"nav-btn",onClick:y},"设置分类"),t("button",{class:"nav-btn",onClick:A},"动漫编辑")])]),t("div",w,[J(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>r.value=e),onChange:M},[s[1]||(s[1]=t("option",{value:""},"所有分类",-1)),(i(!0),n(_,null,p(g.value,e=>(i(),n("option",{key:e.name,value:e.name},c(e.name),9,F))),128))],544),[[O,r.value]])]),t("div",P,[(i(!0),n(_,null,p(k.value,e=>(i(),n("div",{key:e.id,class:"anime-card",onClick:v=>C(e)},[t("img",{src:e.image,alt:e.title,class:"anime-image"},null,8,q),t("div",U,c(e.title),1),t("div",W,c(e.info),1),e.category?(i(),n("div",j,c(e.category),1)):x("",!0)],8,R))),128))])]))}},Q=B(z,[["__scopeId","data-v-e46c9eaf"]]);export{Q as default};
